define(["loglevel","jquery","backbone","underscore","toastr","fenix-ui-menu","fenix-ui-catalog","fenix-ui-bridge","q","fenix-ui-filter","fenix-ui-metadata-editor","fenix-ui-DSDEditor","fenix-ui-DataEditor"],function(t,e,n,i,a,r,o,s,l,d,u,c,h){return function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){var i,a;i=[n(3),n(6),n(4),n(63),n(37),n(31),n(2),n(64),n(65),n(66)],a=function(t,e,i,a,r,o,s,l,d,u){"use strict";function c(i){t.info("FENIX Data Management",i),e.extend(!0,this,{initial:i}),n(67),this._parseInput();var a=this._validateInput();a===!0?(this._attach(),this._start()):(t.error("Impossible to create Data Management"),t.error(a))}return c.prototype._validateInput=function(){var e=!0,n=[];return 0===this.$el.length&&(n.push({code:o.MISSING_CONTAINER}),t.warn("Impossible to find container")),n.length>0?n:e},c.prototype._attach=function(){this.$el.html(a),t.info("Template attach : success")},c.prototype._parseInput=function(){this.$el=e(this.initial.el),this.cache="boolean"==typeof this.initial.cache?this.initial.cache:r.cache,this.environment=this.initial.environment,this.lang=this.initial.lang||r.lang,this.routes=this.initial.routes,this.disabledSections=this.initial.disabledSections||[],this.catalogConfig=this.initial.catalog||s,this.dsdEditorConfig=this.initial.dsdEditor||l,this.dataEditorConfig=this.initial.dataEditor||d,this.metadataEditorConfig=this.initial.metadataEditor||u,this.config=this.initial.config||r.config},c.prototype._start=function(){var e={$el:this.$el,cache:this.cache,environment:this.environment,lang:this.lang,config:this.config,menuConfig:this.menuConfig,catalogConfig:this.catalogConfig,metadataEditorConfig:this.metadataEditorConfig,dsdEditorConfig:this.dsdEditorConfig,dataEditorConfig:this.dataEditorConfig,routes:this.routes,disabledSections:this.disabledSections};t.info("Router config:"),t.info(e),this.router=new i(e),t.info("Router start: success")},c}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(t,e,n){var i;i=function(){"use strict";return{defaultSelectors:["freeText","resourceType","contextSystem"],hideCloseButton:!0,pluginRegistry:{contextSystem:{selector:{id:"dropdown",source:[{value:"uneca",label:"UNECA"},{value:"cstat_training",label:"CountrySTAT Training"}],default:["uneca"],hideSummary:!0,config:{plugins:["remove_button"],mode:"multi"}},template:{hideRemoveButton:!1},format:{output:"enumeration",metadataAttribute:"dsd.contextSystem"}}}}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(e,n){e.exports=t},function(t,e,n){var i,a;i=[n(6),n(7),n(33),n(3),n(34),n(35),n(36),n(37),n(32),n(38),n(39),n(5),n(40),n(44),n(45),n(48),n(52),n(55),n(60),n(62),n(8)],a=function(t,e,n,i,a,r,o,s,l,d,u,c,h,f,p,g,v,m,D,E,b){"use strict";var S={MENU:"#fx-data-management-menu",CONTAINER:"#fx-data-management-content",HOLDER:"#fx-data-management-content-holder",BTN_CONTAINER:"#fx-data-managment-update-model-holder",BTN_ELEMENT:"#fx-data-managment-update-button",HEADER:"#fx-data-managment-header-title",RES_TITLE:"#fx-data-managment-resource-title"},_=o;return e.Router.extend({initialize:function(n){i.info("Router params:"),i.info(n),t.extend(!0,this,{initial:n}),this._parseInput(),this._initVariables(),this._initComponents(),this._bindEventListeners(),e.history.start(),i.info("Backbone.history.start() success")},routes:_,_parseInput:function(){this.$el=this.initial.$el,this.container=this.initial.container||S.CONTAINER,this.cache=this.initial.cache,this.environment=this.initial.environment,this.lang=this.initial.lang,this.lang=this.lang.toLowerCase(),this.config=this.initial.config,this.dsdEditorConfig=this.initial.dsdEditorConfig||{},this.catalogConfig=this.initial.catalogConfig||{},this.metadataEditorConfig=this.initial.metadataEditorConfig||{},this.dataEditorConfig=this.initial.dataEditorConfig||{},this.menuConfig=this.initial.menuConfig||u,this.disabledSections=this.initial.disabledSections||[],_=this.initial.routes||_},_initVariables:function(){this.$viewsHolder=this.$el.find(S.HOLDER),this.$header=this.$el.find(S.HEADER),this.$pageTitle=this.$el.find(S.RES_TITLE)},_initComponents:function(){i.info("Render common views"),a.options=r,E.init({environment:this.environment,cache:this.cache}),this._initMenu(),i.info("Router components init: success")},_initMenu:function(){i.info("render menu"),this.menu=new d({lang:this.lang,config:this.menuConfig,container:S.MENU}),this._activateInitialMenuItems()},_activateInitialMenuItems:function(){this.menu.disable(s.menuItems),this.menu.activate(s.menuItemsEnabledOnStart),i.info("Activate menu initial items: success")},_activateValidResourceMenuItems:function(){this.menu.disable(s.menuItems),this.menu.activate(s.menuItemsEnableOnValidResource),i.info("Activate valid resource menu items: success")},_bindEventListeners:function(){var t=this;this.menu.on("select",function(e){i.info("Listen to menu event: "+e.id),t.goTo("#/"+e.id)}),this.listenTo(e,l.RESOURCE_CREATED,function(){i.info("[EVT] resource:new"),a.info(b[t.lang].resourceNew),t._activateValidResourceMenuItems(),t.goTo("#/metadata")}),this.listenTo(e,l.RESOURCE_DELETED,function(){i.info("[EVT] resource:deleted ",E.resource),a.success(b[t.lang].resourceDeleted),t._activateInitialMenuItems(),t.goTo("#/landing")}),this.listenTo(e,l.RESOURCE_LOAD,function(e){return i.info("[EVT] resource:loading ",e),this.waiting===!0?(i.warn("Abort loading resource because another one is already loading"),void a.info(b[t.lang].alreadyLoading)):(this.waiting=!0,E.unloadResource(),void E.loadResource(e))}),this.listenTo(e,l.RESOURCE_DELETE,function(){i.info("[EVT] resource:delete "),E.deleteResource()}),this.listenTo(e,l.RESOURCE_LOADED,function(){i.info("[EVT] resource:loaded "),this.waiting=!1,t._activateValidResourceMenuItems(),a.success(b[t.lang].resourceLoaded),t.goTo("#/home")}),this.listenTo(e,l.RESOURCE_UNLOADED,function(){i.info("[EVT] resource:unloaded ",E.resource),t._activateInitialMenuItems()}),this.listenTo(e,l.RESOURCE_UPDATED,function(){i.info("[EVT] resource:updated ",E.resource),a.success(b[t.lang].resourceSaved),t.goTo("#/home")}),this.listenTo(e,"data:loading",function(){i.info("[EVT] data:loading ")}),this.listenTo(e,"data:loaded",function(){i.info("[EVT] data:loaded "),a.success(b[t.lang].csvLoaded)}),this.listenTo(e,"data:saving",function(t){i.info("[EVT] data:saving"),E.setData(t)}),this.listenTo(e,l.METADATA_SAVE,function(t){i.info("[EVT] meta:saving"),E.updateMetadata(t),E.saveMetadata()}),this.listenTo(e,l.METADATA_COPY_EMPTY_RESOURCE,function(){a.warning(b[this.lang][l.METADATA_COPY_EMPTY_RESOURCE])}),this.listenTo(e,l.METADATA_COPY_SUCCESS,function(){a.success(b[this.lang][l.METADATA_COPY_SUCCESS])}),this.listenTo(e,l.DSD_SAVE,function(t){i.info("[EVT] dsd:saving"),E.updateDsd(t),E.saveDsd()}),this.listenTo(e,l.DSD_COPY_EMPTY_RESOURCE,function(t){a.warning(b[this.lang][l.DSD_COPY_EMPTY_RESOURCE])}),this.listenTo(e,l.DSD_COPY_SUCCESS,function(t){a.success(b[this.lang][l.DSD_COPY_SUCCESS])}),this.listenTo(e,"error:showerrormsg",function(e){i.info("[EVT] error:showerrormsg "),a.error(e),t.waiting=!1}),this.listenTo(e,"error:showerror",function(t,e){i.info("[EVT] error:showerror ",t,e);var n=b[this.lang][t]||JSON.stringify(e)||"Generic Error";a.error(n)}),this.listenTo(e,"error:showerrorsrv",function(t,e){i.info("[EVT] error:showerrorsrv ",t,e);var n=b[this.lang][t]||"Server: "+JSON.stringify(e.responseJSON)||"Generic Error";a.error(n)}),this.listenTo(e,l.METADATA_INFO,function(t,e){i.info("[EVT] error:showerrorsrv ",t,e);var n=b[this.lang][t]||"Server: "+JSON.stringify(e.responseJSON)||"Generic Error";a.info(n)}),this.listenTo(e,l.SHOW_ADD,function(){i.info("[EVT] button:new "),this.goTo("#/add")}),this.listenTo(e,l.SHOW_SEARCH,function(){i.info("[EVT] button:search "),this.goTo("#/search")}),this.listenTo(e,l.RESOURCE_DELETE_UNDO,function(){i.info("[EVT] button:undo "),this.goTo("#/home")}),this.listenTo(e,l.SHOW_METADATA,function(){i.info("[EVT] button:metadata "),this.goTo("#/metadata")}),this.listenTo(e,l.SHOW_DSD,function(){i.info("[EVT] button:dsd "),this.goTo("#/dsd")}),this.listenTo(e,l.SHOW_DATA,function(){i.info("[EVT] button:data "),this.goTo("#/data")}),i.info("Router events binding: success")},onLanding:function(){i.info("onLanding called."),this.switchView(c,{el:this.container,menu:"landing",lang:this.lang})},onHome:function(){i.info("onHome called."),this.switchView(D,{el:this.container,menu:"home",lang:this.lang,disabledSections:this.disabledSections,environment:this.environment})},onSearch:function(){i.info("onSearch called."),this.switchView(h,{el:this.container,menu:"search",lang:this.lang,cache:this.cache,environment:this.environment,catalog:this.catalogConfig})},onDenied:function(){i.info("Denied - Routing to Lading"),this.goTo("#/landing")},onClose:function(){i.info("Close - Routing to Landing"),t.isEmptyObject(E.resource)||(E.unloadResource(),a.success(b[this.lang].CloseHeader)),this.goTo("#/landing")},onAdd:function(){i.info("Add Resource"),E.unloadResource(),E.createResource(this.config)},onMetadata:function(){i.info("Metadata View"),this.switchView(g,{el:this.container,menu:"metadata",lang:this.lang,environment:this.environment,config:this.metadataEditorConfig,model:E.getMetadata()})},onDSD:function(){i.info("DSD View"),this.switchView(v,{el:this.container,menu:"dsd",lang:this.lang,environment:this.environment,config:t.extend(!0,this.dsdEditorConfig,{lang:this.lang,contextSystem:this.config.contextSystem,datasources:this.config.datasources}),model:E.getDSD(),isEditable:E.isDSDEditable()})},onData:function(){i.info("Data View"),this.switchView(m,{el:this.container,menu:"data",config:this.dataEditorConfig,lang:this.lang,codelists:E.getCurrentResourceCodelists(),dsd:E.getDSD(),data:E.getData(),generator:E.generateDSDStructure(),environment:this.environment})},onDelete:function(){i.info("Delete Resource"),this.switchView(p,{el:this.container,menu:"delete",lang:this.lang,environment:this.environment})},onNotFound:function(){i.info("Not found"),this.switchView(f,{el:this.container,lang:this.lang})},onDefaultRoute:function(){i.info("Default"),this.goTo("#/not-found")},switchView:function(t,e){if(this.currentViewCreator===t)return void i.warn("Abort switch view because candidate view is current view");this.currentViewCreator=t,i.info("Switch view");var n=this,a=new t(e);"function"==typeof a.accessControl?(i.info("View has access control",E.resource),a.accessControl(E.resource).then(function(){i.warn("Access control: GRANTED"),n.resetView(),n.renderView(t,e)},function(){i.warn("Access control: DENIED"),n.resetView(),n.onDenied()})):(i.info("View has NOT access control"),this.resetView(),this.renderView(t,e)),this._updatePageTitle()},resetView:function(){this.disposeCurrentView(),this.addViewContainer()},renderView:function(t,e){this.menu.select(e.menu),this.currentView=new t(e).render(e)},_updatePageTitle:function(){var e="",n=this,a="";t.each(this.menu.o.conf.items,function(t,e){e.attrs.id==n.menu.o.active&&(a=e.label[n.lang.toUpperCase()])}),this.$header.html(a),t.isPlainObject(E.resource.metadata)&&(E.resource.metadata.title?(i.info(E.resource.metadata.title),e=" / "+(E.resource.metadata.title[this.lang.toUpperCase()]||E.resource.metadata.title.EN)):e=" / "+b[this.lang.toLowerCase()].NoTitle),this.$pageTitle.html(e)},disposeCurrentView:function(){this.currentView&&this.currentView.remove&&(this.currentView.remove(),delete this.currentView,i.info("Removed current view")),i.info("Dispose current view: success")},addViewContainer:function(){this.$viewsHolder.html('<div id="'+S.CONTAINER.substring(1)+'"></div>'),i.info("Add view container: success")},goTo:function(t,e,n){this.navigate(t,{trigger:!!e,replace:!!n})}})}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(t,e,n){var i,a;i=[n(6),n(7),n(3),n(8),n(11),n(31),n(32)],a=function(t,e,n,i,a,r,o){"use strict";var s={btnSearch:"#btnSearch",btnAdd:"#btnAdd",DManHeader:"#DManHeader",DManIntro:"#DManIntro"},l=e.View.extend({render:function(e){t.extend(!0,this,{initial:e}),this._parseInput();var i=this._validateInput();return i===!0?(n.info("Rendering View - Landing",this),this._attach(),this._bindEventListeners(),this):(n.error("Impossible to render Landing"),void n.error(i))},_attach:function(){this.$el.html(a),this.$el.find(s.btnSearch).html(i[this.lang].btnSearch),this.$el.find(s.btnAdd).html(i[this.lang].btnAdd),this.$el.find(s.DManHeader).html(i[this.lang].DManHeader),this.$el.find(s.DManIntro).html(i[this.lang].DManIntro)},_validateInput:function(){var t=!0,e=[];return 0===this.$el.length&&(e.push({code:r.MISSING_CONTAINER}),n.warn("Impossible to find container")),e.length>0?e:t},_parseInput:function(){this.cache=this.initial.cache,this.environment=this.initial.environment,this.lang=this.initial.lang.toLowerCase()},_bindEventListeners:function(){this.$el.find(s.btnSearch).on("click",function(){e.trigger(o.SHOW_SEARCH)}),this.$el.find(s.btnAdd).on("click",function(){e.trigger(o.SHOW_ADD)})},_unbindEventListeners:function(){this.$el.find(s.btnSearch).off(),this.$el.find(s.btnAdd).off()},remove:function(){this._unbindEventListeners(),e.View.prototype.remove.apply(this,arguments)}});return l}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e,n){var i,a;i=[n(9),n(10)],a=function(t,e){"use strict";return{en:t,fr:e}}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(t,e,n){var i;i=function(){"use strict";return{confirmDataRemove:"Do you want to remove all your data?",success:"Success",resourceNew:"Resource created",resourceSaved:"Resource saved",resourceDeleted:"Resource deleted",resourceLoaded:"Resource loaded",resourceCopied:"Resource copied",alreadyLoading:"Please be patient. Resource is loading...",error:"Error",errorMetaMinimum:'Please fill the minimum set of metadata in the "Identification" and "Contacts" sections',errorParsingJson:"Error parsing Json file, check the structure and try again",errorLoadinResource:"Error loading the resource",errorSavingResource:"Error saving the resource",overwriteExistingDSD:"This operation will overwrite the DSD you're working on, continue?",unsavedWarning:"Some changes are not saved, do you want to continue without saving?",downloadDSD:"Download DSD",uploadDSD:"Upload DSD",invalidData:"Data is not valid",nullDSDCols:"DSD has no columns",nullCsvCols:"CSV has no columns",wrongColumnCount:"The columns' count in the CSV must match the one in the DSD",wrongColumnId:"The columns' names in the CSV must match the IDs in the DSD",unknownCodes:"Some codes could not be found in a codelist",DataMatchColumn:"Match the DSD columns with the CSV ones",DataDuplicateFound:"Some duplicated values found, keep old data or replace with the new values just uploaded?",btnDataMergeKeepNew:"Replace with new values",btnDataMergeKeepOld:"Keep old values",btnDataMergeCancel:"Cancel",DataEditorMainContainer:"LOADING...",DataDeleteAll:"Delete all",DatalblUpload:"Upload",DatalblSeparator:"CSV Separator",DatalblcsvSeparatorSemi:"Semicolon",DatalblcsvSeparatorComma:"Comma",csvLoaded:"CSV Loaded",unknownCode:"Unknown code",invalidYear:"Invalid year",invalidMonth:"Invalid month",invalidDate:"Invalid date",invalidNumber:"Invalid number",invalidBool:"Invalid boolean",btnSearch:"SEARCH",btnAdd:"ADD",btnMetadata:"METADATA",btnDSD:"DSD",btnData:"DATA",btnSaveMeta:"Save",btnCopyMeta:"Copy Metadata",btnLoadMeta:"Load",btnSaveDSD:"Save",btnClose:"Close",btnCsvMatcherOk:"OK",btnCsvMatcherCancel:"Cancel",btnHome:"Home",btnDeleteUndo:"Undo",btnDeleteConfirm:"Confirm",dataEditEnd:"Save",btnSave:"Save",DManHeader:"FENIX Data Management",DManResHeader:"Edit Resource",MetaHeader:"Metadata Editor",MetaCopyHeader:"Copy metadata from",DSDHeader:"Data Structure Definition Editor",DataHeader:"Data Editor",CloseHeader:"Resource Closed",DeleteHeader:"Delete Resource?",DManIntro:"Data management is the process of controlling the information generated during a research project. Any research will require some level of data management, and funding agencies are increasingly requiring scholars to plan and execute good data management practices.",CopyMetaRID:"Resource Identification Code",CopyMetaVer:"Resource Version (if applicable)",NoTitle:"Untitled",metadataValidationWarning:"Please fill the mandatory fields",DSD_COPY_SUCCESS:"DSD copied successfully",DSD_COPY_EMPTY_RESOURCE:"Resource does not contains columns",METADATA_COPY_EMPTY_RESOURCE:"Resource not found",METADATA_COPY_SUCCESS:"Metadata copied successfully"}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i;i=function(){"use strict";return{confirmDataRemove:"Voulez-vous supprimer toutes les données?",success:"Réussite",resourceNew:"Ressource Créée",resourceSaved:"Ressource enregistrée",resourceDeleted:"Ressource supprimée",resourceLoaded:"Ressource chargée",resourceCopied:"Ressource copiée",error:"Erreur",errorMetaMinimum:'Remplissez l\'ensemble minimale de métadonnées dans les sections "Identification" et "Contacts"',errorParsingJson:"Erreur d'analyse du fichier Json, vérifiez la structure et essayez de nouveau",errorLoadinResource:"Erreur de chargement de la ressource",errorSavingResource:"Erreur de sauvegarde de la ressource",overwriteExistingDSD:"Cette opération écrasera le DSD sur lequel vous travaillez, voulez-vous continuer?",unsavedWarning:"Certaines modifications ne sont pas enregistrées changes are not saved, voulez-vous continuer sans enregistrer?",downloadDSD:"Téléchargez le DSD",uploadDSD:"Uploadez le DSD",invalidData:"Les données ne sont pas valides",nullDSDCols:"Le DSD n'a pas de colonnes",nullCsvCols:"Le CSV n'a pas de colonnes",wrongColumnCount:"Le nombre des colonnes dans le CSV doit correspondre à celui du DSD",wrongColumnId:"Les noms des colonnes dans le CSV doivent correspondre aux IDs dans le DSD",unknownCodes:"Des codes n'ont pas été trouvés dans la codeliste",DataMatchColumn:"Faites correspondre les colonnes du DSD avec celles du CSV",DataDuplicateFound:"Des valeurs dupliquées ont été trouvées, voulez-vous conserver les vieilles valeurs ou les remplacer avec les nouvelles?",btnDataMergeKeepNew:"Remplacer avec les nouvelles valeurs",btnDataMergeKeepOld:"Conserver les vieilles valeurs",btnDataMergeCancel:"Annulez",DataEditorMainContainer:"Chargement en cours...",DataDeleteAll:"Supprimez tous",DatalblUpload:"Téléchargez",DatalblSeparator:"Séparateur du CSV",DatalblcsvSeparatorSemi:"Point-virgule",DatalblcsvSeparatorComma:"Virgule",csvLoaded:"CSV chargée",unknownCode:"Code inconnu",invalidYear:"Année non valide",invalidMonth:"Mois non valide",invalidDate:"Date non valide",invalidNumber:"Nombre non valide",invalidBool:"Valeur booléenne non valide",btnSearch:"RECHERCHER",btnAdd:"AJOUTER",btnMetadata:"MÉTADONNÉES",btnDSD:"DSD",btnData:"DONNÉES",btnSaveMeta:"Enregistrer",btnCopyMeta:"Copier les métadonnées",btnLoadMeta:"Charger",btnSaveDSD:"Enregistrer",btnClose:"Annuler",btnCsvMatcherOk:"OK",btnCsvMatcherCancel:"Annuler",btnHome:"Accueil",btnDeleteUndo:"Annuler",btnDeleteConfirm:"Confirmer",dataEditEnd:"Enregistrer",btnSave:"Enregistrer",DManHeader:"Gestion des Données FENIX",DManResHeader:"Éditer la Ressource",MetaHeader:"Éditeur des Métadonnées",MetaCopyHeader:"Copier les métadonnées",DSDHeader:"Éditeur de la Définition de la Structure des Données",DataHeader:"Éditeur des Données",CloseHeader:"Ressource fermée",DeleteHeader:"Voulez-vous supprimer la ressource?",DManIntro:"La gestion des données est le processus de contrôle des informations générées lors d'un projet de recherche. Toutes les recherches nécessiteront d'un certain niveau de gestion des données, et les organismes de financement sont de plus en plus exigeant que les chercheurs planifient et exécutent des bonnes pratiques de gestion des données.",CopyMetaRID:"Code d'identification de la Ressource",CopyMetaVer:"Version de la Ressource (si applicable)",NoTitle:"Sans Titre",metadataValidationWarning:"Veuillez remplir les champs obligatoires",DSD_COPY_SUCCESS:"DSD copié avec succès",DSD_COPY_EMPTY_RESOURCE:"Ressource ne contient pas de colonnes",METADATA_COPY_EMPTY_RESOURCE:"Ressource introuvable",METADATA_COPY_SUCCESS:"Métadonnées copiées avec succès"}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i=n(12);t.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,a){return'<div class="row">\r\n    <div class="col-xs-12">\r\n        <div class="datamng-welcome">\r\n\r\n            <h3 id="DManHeader">Fenix Data Editor</h3>\r\n            <p id="DManIntro">Data management is the process of controlling the information generated during a research\r\n                project. Any research will require some level of data management, and funding agencies are increasingly\r\n                requiring scholars to plan and execute good data management practices.</p>\r\n\r\n            <button id="btnSearch" class="btn btn-default fx-button-primary-color"> Search</button>\r\n\r\n            <button id="btnAdd" class="btn btn-default fx-button-primary-color"> Add</button>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n'},useData:!0})},function(t,e,n){t.exports=n(13).default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(){var t=new s.HandlebarsEnvironment;return f.extend(t,s),t.SafeString=d.default,t.Exception=c.default,t.Utils=f,t.escapeExpression=f.escapeExpression,t.VM=g,t.template=function(e){return g.template(e,t)},t}e.__esModule=!0;var o=n(14),s=a(o),l=n(28),d=i(l),u=n(16),c=i(u),h=n(15),f=a(h),p=n(29),g=a(p),v=n(30),m=i(v),D=r();D.create=r,m.default(D),D.default=D,e.default=D,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},l.registerDefaultHelpers(this),d.registerDefaultDecorators(this)}e.__esModule=!0,e.HandlebarsEnvironment=a;var r=n(15),o=n(16),s=i(o),l=n(17),d=n(25),u=n(27),c=i(u),h="4.0.5";e.VERSION=h;var f=7;e.COMPILER_REVISION=f;var p={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=p;var g="[object Object]";a.prototype={constructor:a,logger:c.default,log:c.default.log,registerHelper:function(t,e){if(r.toString.call(t)===g){if(e)throw new s.default("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(r.toString.call(t)===g)r.extend(this.partials,t);else{if("undefined"==typeof e)throw new s.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(r.toString.call(t)===g){if(e)throw new s.default("Arg not supported with multiple decorators");r.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var v=c.default.log;e.log=v,e.createFrame=r.createFrame,e.logger=c.default},function(t,e){"use strict";function n(t){return u[t]}function i(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function a(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function r(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return h.test(t)?t.replace(c,n):t}function o(t){return!t&&0!==t||!(!g(t)||0!==t.length)}function s(t){var e=i({},t);return e._parent=t,e}function l(t,e){return t.path=e,t}function d(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=i,e.indexOf=a,e.escapeExpression=r,e.isEmpty=o,e.createFrame=s,e.blockParams=l,e.appendContextPath=d;var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},c=/[&<>"'`=]/g,h=/[&<>"'`=]/,f=Object.prototype.toString;e.toString=f;var p=function(t){return"function"==typeof t};p(/x/)&&(e.isFunction=p=function(t){return"function"==typeof t&&"[object Function]"===f.call(t)}),e.isFunction=p;var g=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===f.call(t)};e.isArray=g},function(t,e){"use strict";function n(t,e){var a=e&&e.loc,r=void 0,o=void 0;a&&(r=a.start.line,o=a.start.column,t+=" - "+r+":"+o);for(var s=Error.prototype.constructor.call(this,t),l=0;l<i.length;l++)this[i[l]]=s[i[l]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{a&&(this.lineNumber=r,Object.defineProperty?Object.defineProperty(this,"column",{value:o}):this.column=o)}catch(t){}}e.__esModule=!0;var i=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e.default=n,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t){o.default(t),l.default(t),u.default(t),h.default(t),p.default(t),v.default(t),D.default(t)}e.__esModule=!0,e.registerDefaultHelpers=a;var r=n(18),o=i(r),s=n(19),l=i(s),d=n(20),u=i(d),c=n(21),h=i(c),f=n(22),p=i(f),g=n(23),v=i(g),m=n(24),D=i(m)},function(t,e,n){"use strict";e.__esModule=!0;var i=n(15);e.default=function(t){t.registerHelper("blockHelperMissing",function(e,n){var a=n.inverse,r=n.fn;if(e===!0)return r(this);if(e===!1||null==e)return a(this);if(i.isArray(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):a(this);if(n.data&&n.ids){var o=i.createFrame(n.data);o.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:o}}return r(e,n)})},t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(15),r=n(16),o=i(r);e.default=function(t){t.registerHelper("each",function(t,e){function n(e,n,r){d&&(d.key=e,d.index=n,d.first=0===n,d.last=!!r,u&&(d.contextPath=u+e)),l+=i(t[e],{data:d,blockParams:a.blockParams([t[e],e],[u+e,null])})}if(!e)throw new o.default("Must pass iterator to #each");var i=e.fn,r=e.inverse,s=0,l="",d=void 0,u=void 0;if(e.data&&e.ids&&(u=a.appendContextPath(e.data.contextPath,e.ids[0])+"."),a.isFunction(t)&&(t=t.call(this)),e.data&&(d=a.createFrame(e.data)),t&&"object"==typeof t)if(a.isArray(t))for(var c=t.length;s<c;s++)s in t&&n(s,s,s===t.length-1);else{var h=void 0;for(var f in t)t.hasOwnProperty(f)&&(void 0!==h&&n(h,s-1),h=f,s++);void 0!==h&&n(h,s-1,!0)}return 0===s&&(l=r(this)),l})},t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(16),r=i(a);e.default=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new r.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var i=n(15);e.default=function(t){t.registerHelper("if",function(t,e){return i.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||i.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers.if.call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",function(){for(var e=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)e.push(arguments[i]);var a=1;null!=n.hash.level?a=n.hash.level:n.data&&null!=n.data.level&&(a=n.data.level),e[0]=a,t.log.apply(t,e)})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var i=n(15);e.default=function(t){t.registerHelper("with",function(t,e){i.isFunction(t)&&(t=t.call(this));var n=e.fn;if(i.isEmpty(t))return e.inverse(this);var a=e.data;return e.data&&e.ids&&(a=i.createFrame(e.data),a.contextPath=i.appendContextPath(e.data.contextPath,e.ids[0])),n(t,{data:a,blockParams:i.blockParams([t],[a&&a.contextPath])})})},t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t){o.default(t)}e.__esModule=!0,e.registerDefaultDecorators=a;var r=n(26),o=i(r)},function(t,e,n){"use strict";e.__esModule=!0;var i=n(15);e.default=function(t){t.registerDecorator("inline",function(t,e,n,a){var r=t;return e.partials||(e.partials={},r=function(a,r){var o=n.partials;n.partials=i.extend({},o,e.partials);var s=t(a,r);return n.partials=o,s}),e.partials[a.args[0]]=a.fn,r})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var i=n(15),a={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=i.indexOf(a.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=a.lookupLevel(t),"undefined"!=typeof console&&a.lookupLevel(a.level)<=t){var e=a.methodMap[t];console[e]||(e="log");for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];console[e].apply(console,i)}}};e.default=a,t.exports=e.default},function(t,e){"use strict";function n(t){this.string=t}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e.default=n,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){var e=t&&t[0]||1,n=m.COMPILER_REVISION;if(e!==n){if(e<n){var i=m.REVISION_CHANGES[n],a=m.REVISION_CHANGES[e];throw new v.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+a+").")}throw new v.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function o(t,e){function n(n,i,a){a.hash&&(i=p.extend({},i,a.hash),a.ids&&(a.ids[0]=!0)),n=e.VM.resolvePartial.call(this,n,i,a);var r=e.VM.invokePartial.call(this,n,i,a);if(null==r&&e.compile&&(a.partials[a.name]=e.compile(n,t.compilerOptions,e),r=a.partials[a.name](i,a)),null!=r){if(a.indent){for(var o=r.split("\n"),s=0,l=o.length;s<l&&(o[s]||s+1!==l);s++)o[s]=a.indent+o[s];r=o.join("\n")}return r}throw new v.default("The partial "+a.name+" could not be compiled when running in runtime-only mode")}function i(e){function n(e){return""+t.main(a,e,a.helpers,a.partials,o,l,s)}var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=r.data;i._setup(r),!r.partial&&t.useData&&(o=c(e,o));var s=void 0,l=t.useBlockParams?[]:void 0;return t.useDepths&&(s=r.depths?e!=r.depths[0]?[e].concat(r.depths):r.depths:[e]),(n=h(t.main,n,a,r.depths||[],o,l))(e,r)}if(!e)throw new v.default("No environment passed to template");if(!t||!t.main)throw new v.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var a={strict:function(t,e){if(!(e in t))throw new v.default('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:p.escapeExpression,invokePartial:n,fn:function(e){var n=t[e];return n.decorator=t[e+"_d"],n},programs:[],program:function(t,e,n,i,a){var r=this.programs[t],o=this.fn(t);return e||a||i||n?r=s(this,t,o,e,n,i,a):r||(r=this.programs[t]=s(this,t,o)),r},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=p.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler};return i.isTop=!0,i._setup=function(n){n.partial?(a.helpers=n.helpers,
a.partials=n.partials,a.decorators=n.decorators):(a.helpers=a.merge(n.helpers,e.helpers),t.usePartial&&(a.partials=a.merge(n.partials,e.partials)),(t.usePartial||t.useDecorators)&&(a.decorators=a.merge(n.decorators,e.decorators)))},i._child=function(e,n,i,r){if(t.useBlockParams&&!i)throw new v.default("must pass block params");if(t.useDepths&&!r)throw new v.default("must pass parent depths");return s(a,e,t[e],n,0,i,r)},i}function s(t,e,n,i,a,r,o){function s(e){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o;return o&&e!=o[0]&&(s=[e].concat(o)),n(t,e,t.helpers,t.partials,a.data||i,r&&[a.blockParams].concat(r),s)}return s=h(n,s,t,o,i,r),s.program=e,s.depth=o?o.length:0,s.blockParams=a||0,s}function l(t,e,n){if(t)t.call||n.name||(n.name=t,t=n.partials[t]);else if("@partial-block"===n.name){for(var i=n.data;i["partial-block"]===u;)i=i._parent;t=i["partial-block"],i["partial-block"]=u}else t=n.partials[n.name];return t}function d(t,e,n){n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;if(n.fn&&n.fn!==u&&(n.data=m.createFrame(n.data),i=n.data["partial-block"]=n.fn,i.partials&&(n.partials=p.extend({},n.partials,i.partials))),void 0===t&&i&&(t=i),void 0===t)throw new v.default("The partial "+n.name+" could not be found");if(t instanceof Function)return t(e,n)}function u(){return""}function c(t,e){return e&&"root"in e||(e=e?m.createFrame(e):{},e.root=t),e}function h(t,e,n,i,a,r){if(t.decorator){var o={};e=t.decorator(e,o,n,i&&i[0],a,r,i),p.extend(e,o)}return e}e.__esModule=!0,e.checkRevision=r,e.template=o,e.wrapProgram=s,e.resolvePartial=l,e.invokePartial=d,e.noop=u;var f=n(15),p=a(f),g=n(16),v=i(g),m=n(14)},function(t,e){(function(n){"use strict";e.__esModule=!0,e.default=function(t){var e="undefined"!=typeof n?n:window,i=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=i),t}},t.exports=e.default}).call(e,function(){return this}())},function(t,e,n){var i;i=function(){"use strict";var t="";return{MISSING_CONTAINER:t+"missing_container",MISSING_BUTTONS:t+"missing_button"}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i;i=function(){"use strict";return{RESOURCE_LOAD:"RESOURCE_LOAD",RESOURCE_LOADED:"RESOURCE_LOADED",RESOURCE_UPDATED:"RESOURCE_UPDATED",RESOURCE_UNLOADED:"RESOURCE_UNLOADED",RESOURCE_DELETE:"RESOURCE_DELETE",RESOURCE_DELETE_UNDO:"RESOURCE_DELETE_UNDO",RESOURCE_DELETED:"RESOURCE_DELETED",RESOURCE_CREATED:"RESOURCE_CREATED",SHOW_METADATA:"SHOW_METADATA",SHOW_DSD:"SHOW_DSD",SHOW_DATA:"SHOW_DATA",SHOW_SEARCH:"SHOW_SEARCH",SHOW_ADD:"SHOW_ADD",METADATA_SAVE:"METADATA_SAVE",METADATA_INFO:"METADATA_INFO",METADATA_COPY_EMPTY_RESOURCE:"METADATA_COPY_EMPTY_RESOURCE",METADATA_COPY_SUCCESS:"METADATA_COPY_SUCCESS",DSD_SAVE:"DSD_SAVE",DSD_COPY_EMPTY_RESOURCE:"DSD_COPY_EMPTY_RESOURCE",DSD_COPY_SUCCESS:"DSD_COPY_SUCCESS"}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports=i},function(t,e){t.exports=a},function(t,e,n){var i;i=function(){"use strict";return{closeButton:!1,debug:!1,newestOnTop:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"2500",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i;i=function(){"use strict";return{"(/)":"onLanding","(/)landing(/)":"onLanding","(/)home(/)":"onHome","(/)add(/)":"onAdd","(/)metadata(/)":"onMetadata","(/)dsd(/)":"onDSD","(/)data(/)":"onData","(/)close(/)":"onClose","(/)delete(/)":"onDelete","(/)search(/)":"onSearch","(/)not-found(/)":"onNotFound","(/)denied(/)":"onDenied","(/)*path":"onDefaultRoute"}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i;i=function(){"use strict";return{lang:"EN",config:{contextSystem:"fenix_develop",datasources:["D3S"],resourceRepresentationType:"dataset"},menuItems:["home","landing","search","add","metadata","dsd","data","delete","close"],menuItemsEnabledOnStart:["add","search","landing"],menuItemsEnableOnValidResource:["delete","metadata","dsd","data","home","close"]}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports=r},function(t,e,n){var i;i=function(){"use strict";return{items:[{attrs:{id:"landing"},label:{EN:"Data Management",FR:"Gestion des Données"}},{attrs:{id:"search"},label:{EN:"Search",FR:"Rechercher"}},{attrs:{id:"add"},label:{EN:"Add",FR:"Ajouter"}},{attrs:{id:"home"},label:{EN:"Home",FR:"Accueil"}},{attrs:{id:"metadata"},label:{EN:"Metadata",FR:"Métadonnées"}},{attrs:{id:"dsd"},label:{EN:"DSD",FR:"DSD"}},{attrs:{id:"data"},label:{EN:"Data",FR:"Données"}},{attrs:{id:"delete"},label:{EN:"Delete",FR:"Supprimer"}},{attrs:{id:"close"},label:{EN:"Close",FR:"Terminer"}}],languages:[],active:["landing","search"]}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i,a;i=[n(6),n(7),n(3),n(41),n(2),n(42),n(31),n(32),n(43)],a=function(t,e,n,i,a,r,o,s,l){"use strict";var d={CATALOG:"#catalog-container"},u=e.View.extend({render:function(e){t.extend(!0,this,{initial:e}),this._parseInput();var i=this._validateInput();return i===!0?(n.info("Rendering View - Search",this),this._attach(),this._initCatalog(),this._bindEventListeners(),this):(n.error("Impossible to render Search"),void n.error(i))},_validateInput:function(){var t=!0,e=[];return e.length>0?e:t},_parseInput:function(){this.cache=this.initial.cache,this.environment=this.initial.environment,this.lang=this.initial.lang.toLowerCase(),this.catalogConfig=t.extend(!0,a,this.initial.catalog)},_attach:function(){this.$el.html(l)},_initCatalog:function(){var e=t.extend(!0,{el:this.$el.find(d.CATALOG),cache:this.cache,lang:this.lang,environment:this.environment},this.catalogConfig);this.catalog=new i(e)},_bindEventListeners:function(){n.info("{SEARCH} bindEventListeners()"),this.catalog.on("select",function(t){n.info("*select* triggered"),e.trigger(s.RESOURCE_LOAD,t)})},remove:function(){this.catalog.dispose(),e.View.prototype.remove.apply(this,arguments)}});return u}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports=o},function(t,e){t.exports=s},function(t,e,n){var i=n(12);t.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,a){return'<div data-role="modal" class="modal fade catalog-modal catalog-dm" tabindex="-1" role="dialog"\r\n     aria-labelledby="analysisCatalog">\r\n    <div class="modal-dialog modal-lg">\r\n        <div class="modal-content">\r\n\r\n            <div id="catalog-container"></div>\r\n\r\n        </div>\r\n    </div>\r\n</div>'},useData:!0})},function(t,e,n){var i,a;i=[n(6),n(7),n(3)],a=function(t,e,n){"use strict";var i=e.View.extend({render:function(e){t.extend(!0,this,{initial:e}),this._parseInput();var i=this._validateInput();return i===!0?(n.info("Rendering View - Not Found",this),this._attach(),this):(n.error("Impossible to render Not Found"),void n.error(i))},_validateInput:function(){var t=!0,e=[];return e.length>0?e:t},_parseInput:function(){this.lang=this.initial.lang.toLowerCase()},_attach:function(){this.$el.html("<h1>Oh snap! Error 404</h1>")},remove:function(){e.View.prototype.remove.apply(this,arguments)}});return i}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(t,e,n){var i,a;i=[n(6),n(7),n(3),n(46),n(8),n(47),n(32)],a=function(t,e,n,i,a,r,o){"use strict";var s={HEADER:"#DeleteHeader",BTN_CONFIRM:"#btnDeleteConfirm",BTN_UNDO:"#btnDeleteUndo"},l=e.View.extend({render:function(e){t.extend(!0,this,{initial:e}),this._parseInput();var i=this._validateInput();return i===!0?(n.info("Rendering View - Delete",e),this._attach(),this._initVariables(),this._bindEventListeners(),this):(n.error("Impossible to render Landing"),void n.error(i))},_validateInput:function(){var t=!0,e=[];return e.length>0?e:t},_parseInput:function(){this.lang=this.initial.lang.toLowerCase()},_attach:function(){this.$el.html(r({header:a[this.lang].DeleteHeader,confirm:a[this.lang].btnDeleteConfirm,undo:a[this.lang].btnDeleteUndo}))},_initVariables:function(){this.$confirmButton=this.$el.find(s.BTN_CONFIRM),this.$undoButton=this.$el.find(s.BTN_UNDO)},_bindEventListeners:function(){n.info("{DELETE} bindEventListeners()"),this.$confirmButton.on("click",function(){e.trigger(o.RESOURCE_DELETE)}),this.$undoButton.on("click",function(){e.trigger(o.RESOURCE_DELETE_UNDO)})},_unbindEventListeners:function(){this.$confirmButton.off(),this.$undoButton.off()},accessControl:function(e){return new i.Promise(function(n,i){t.isEmptyObject(e)?i():n()})},remove:function(){this._unbindEventListeners(),e.View.prototype.remove.apply(this,arguments)}});return l}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports=l},function(t,e,n){var i=n(12);t.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,a){var r,o=null!=e?e:{},s=n.helperMissing,l="function",d=t.escapeExpression;return'<div class="row">\r\n    <div class="col-md-4 col-md-offset-4">\r\n        <div class="datamng-welcome">\r\n            <h3 id="DeleteHeader">'+d((r=null!=(r=n.header||(null!=e?e.header:e))?r:s,typeof r===l?r.call(o,{name:"header",hash:{},data:a}):r))+'</h3>\r\n\r\n            <div class="btn-group btn-group-justified" role="group">\r\n                <div class="btn-group" role="group">\r\n                    <button id="btnDeleteConfirm" class="btn btn-default"> '+d((r=null!=(r=n.confirm||(null!=e?e.confirm:e))?r:s,typeof r===l?r.call(o,{name:"confirm",hash:{},data:a}):r))+'</button>\r\n                </div>\r\n                <div class="btn-group" role="group">\r\n                    <button id="btnDeleteUndo" class="btn btn-default fx-button-primary-color"> '+d((r=null!=(r=n.undo||(null!=e?e.undo:e))?r:s,typeof r===l?r.call(o,{name:"undo",hash:{},data:a}):r))+"</button>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n"},useData:!0})},function(t,e,n){var i,a;i=[n(6),n(7),n(33),n(3),n(46),n(50),n(49),n(42),n(51),n(32),n(8)],a=function(t,e,n,i,a,r,o,s,l,d,u){"use strict";var c={SAVE_BUTTON:'[data-role="save"]',METADATA:'[data-role="metadata"]',COPY_FORM:"[data-role='form']",COPY_BUTTON:"[data-role='copy']"},h=e.View.extend({render:function(e){t.extend(!0,this,{initial:e}),this._parseInput();var n=this._validateInput();return n===!0?(i.info("Rendering View - Metadata",this),this._attach(),this._initVariables(),this._initComponents(),this._bindEventListeners(),this):(i.error("Impossible to render Metadata"),void i.error(n))},_initComponents:function(){this.bridge=new s({cache:this.cache,environment:this.environment}),this._initMetadataEditor(),this._initCopyMetadata()},_validateInput:function(){var t=!0,e=[];return e.length>0?e:t},_parseInput:function(){this.environment=this.initial.environment,this.lang=this.initial.lang.toLowerCase(),this.model=this.initial.model,this.config=this.initial.config},_attach:function(){this.$el.html(l({copyTitle:u[this.lang].MetaCopyHeader}))},_initVariables:function(){this.$savebtn=this.$el.find(c.SAVE_BUTTON),this.$copyButton=this.$el.find(c.COPY_BUTTON)},_bindEventListeners:function(){this.$savebtn.on("click",n.bind(this._onSaveClick,this)),this.$copyButton.on("click",n.bind(this._onCopyClick,this))},_onSaveClick:function(){var t=this.MDE.getValues();i.info("Metadata values:"),i.info(t),t.hasOwnProperty("valid")?e.trigger(d.METADATA_INFO,"metadataValidationWarning"):e.trigger(d.METADATA_SAVE,t)},_onCopyClick:function(t){t.stopPropagation();var i=this.copyForm.getValues(),a=i.values.uid[0],r=i.values.version[0];i.valid===!0&&this.bridge.getResource({uid:a,version:r,params:{full:!0,dsd:!0,export:!0}}).then(n.bind(function(t){if(t){var n=t.metadata||{};delete n.uid,delete n.version,this.MDE.setValues(n),e.trigger(d.METADATA_COPY_SUCCESS)}else e.trigger(d.METADATA_COPY_EMPTY_RESOURCE)},this),n.bind(function(t){e.trigger("error:showerrormsg",t)},this))},_initCopyMetadata:function(){this.copyForm=new o({el:this.$el.find(c.COPY_FORM),selectors:{uid:{selector:{id:"input",type:"text",source:[{label:"Uid"}]},constraints:{presence:!0}},version:{selector:{id:"input",type:"text",source:[{label:"Version"}]}}}})},_initMetadataEditor:function(){i.info("{MDE} initViews");var t={el:c.METADATA,lang:this.lang,config:this.config,cache:this.cache,environment:this.environment,model:this.model};i.info("Metadata editor model:"),i.info(t),this.MDE=new r(t)},accessControl:function(e){return new a.Promise(function(n,i){t.isEmptyObject(e)?i():n()})},_unbindEventListeners:function(){this.$savebtn.off("click")},remove:function(){this._unbindEventListeners(),e.View.prototype.remove.apply(this,arguments)}});return h}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports=d},function(t,e){t.exports=u},function(t,e,n){var i=n(12);t.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,a){var r;return'<div class="row">\r\n    <div class="col-xs-12">\r\n        <button data-role="save" type="button" class="pull-right btn btn-floating fx-background-color-primary-color"\r\n                aria-label="Left Align">\r\n            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>\r\n        </button>\r\n\r\n        <div class="dropdown">\r\n\r\n            <button id="dLabel" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"\r\n                    class="pull-left btn btn-floating fx-background-color-primary-color">\r\n                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>\r\n            </button>\r\n\r\n            <div class="dropdown-menu fx-padding" aria-labelledby="dLabel">\r\n                <h6> '+t.escapeExpression((r=null!=(r=n.copyTitle||(null!=e?e.copyTitle:e))?r:n.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"copyTitle",hash:{},data:a}):r))+'</h6>\r\n                <div data-role="form"></div>\r\n                <button data-role="copy" type="button"\r\n                        class="btn btn-floating fx-background-color-primary-color pull-right"\r\n                        aria-label="Left Align">\r\n                    <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n<div class="row">\r\n    <div class="col-xs-12">\r\n        <div data-role="metadata"></div>\r\n\r\n    </div>\r\n</div>\r\n'},useData:!0})},function(t,e,n){var i,a;i=[n(6),n(7),n(33),n(3),n(46),n(53),n(49),n(42),n(54),n(32)],a=function(t,e,n,i,a,r,o,s,l,d){"use strict";var u={SAVE_BUTTON:'[data-role="save"]',DSD_EL:'[data-role="dsd"]',COPY_FORM:"[data-role='form']",COPY_BUTTON:"[data-role='copy']"},c=e.View.extend({render:function(e){t.extend(!0,this,{initial:e}),this._parseInput();var n=this._validateInput();return n===!0?(i.info("Rendering View - DSD",this),this._attach(),this._initVariables(),this._initComponents(),this._bindEventListeners(),this):(i.error("Impossible to render DSD"),void i.error(n))},_attach:function(){this.$el.html(l({isEditable:this.isEditable,copyTitle:"Copy DSD from:"}))},_initComponents:function(){this.bridge=new s({cache:this.cache,environment:this.environment}),this._initDsdEditor(),this._initCopyDsd()},_initVariables:function(){this.$saveButton=this.$el.find(u.SAVE_BUTTON),this.$copyButton=this.$el.find(u.COPY_BUTTON)},_validateInput:function(){var t=!0,e=[];return e.length>0?e:t},_parseInput:function(){this.environment=this.initial.environment,this.lang=this.initial.lang.toLowerCase(),this.config=this.initial.config,this.model=this.initial.model,this.isEditable=this.initial.isEditable},_initDsdEditor:function(){i.info("{DSD} initViews"),this.dsd=r,this.dsd.init(this.$el.find(u.DSD_EL),this.config,null),this.model&&Array.isArray(this.model.columns)&&this.model.columns.length>0&&this.dsd.set(this.model.columns),i.info("{DSD} is editable",this.isEditable),this.dsd.editable(this.isEditable)},_initCopyDsd:function(){this.copyForm=new o({el:this.$el.find(u.COPY_FORM),selectors:{uid:{selector:{id:"input",type:"text",source:[{label:"Uid"}]},constraints:{presence:!0}},version:{selector:{id:"input",type:"text",source:[{label:"Version"}]}}}})},_bindEventListeners:function(){i.info("{DSD} bindEventListeners()"),this.$saveButton.on("click",n.bind(this._onSaveClick,this)),this.$copyButton.on("click",n.bind(this._onCopyClick,this))},_onCopyClick:function(t){t.stopPropagation();var i=this.copyForm.getValues(),a=i.values.uid[0],r=i.values.version[0];i.valid===!0&&this.bridge.getResource({uid:a,version:r,params:{dsd:!0,export:!0}}).then(n.bind(function(t){var n=t.metadata||{},i=n.dsd||{},a=i.columns||[];a.length>0?(this.dsd.set(a),e.trigger(d.DSD_COPY_SUCCESS)):e.trigger(d.DSD_COPY_EMPTY_RESOURCE)},this),n.bind(function(t){e.trigger("error:showerrormsg",t)},this))},_onSaveClick:function(){var t={columns:this.dsd.get(),datasources:this.config.datasources,contextSystem:this.config.contextSystem};i.info("{DSD} saving",t),e.trigger(d.DSD_SAVE,t)},_unbindEventListeners:function(){this.$saveButton.off("click")},accessControl:function(e){return new a.Promise(function(n,i){t.isEmptyObject(e)?i():n()})},remove:function(){i.info("{DSD} remove"),this._unbindEventListeners(),this.dsd.destroy(),e.View.prototype.remove.apply(this,arguments)}});return c}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports=c},function(t,e,n){var i=n(12);t.exports=(i.default||i).template({1:function(t,e,n,i,a){var r;return'            <div class="dropdown">\r\n\r\n                <button id="dLabel" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"\r\n                        class="pull-left btn btn-floating fx-background-color-primary-color">\r\n                    <span class="glyphicon glyphicon-search" aria-hidden="true"></span>\r\n                </button>\r\n\r\n                <div class="dropdown-menu fx-padding" aria-labelledby="dLabel">\r\n                    <h6> '+t.escapeExpression((r=null!=(r=n.copyTitle||(null!=e?e.copyTitle:e))?r:n.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"copyTitle",hash:{},data:a}):r))+'</h6>\r\n                    <div data-role="form"></div>\r\n                    <button data-role="copy" type="button"\r\n                            class="btn btn-floating fx-background-color-primary-color pull-right"\r\n                            aria-label="Left Align">\r\n                        <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n'},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,a){var r;return'<div class="row">\r\n    <div class="col-xs-12">\r\n\r\n'+(null!=(r=n.if.call(null!=e?e:{},null!=e?e.isEditable:e,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a}))?r:"")+'\r\n        <button data-role="save" type="button" class="pull-right btn btn-floating fx-background-color-primary-color"\r\n                aria-label="Left Align">\r\n            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n<hr>\r\n<div class="row">\r\n    <div class="col-xs-12">\r\n        <div data-role="dsd"></div>\r\n    </div>\r\n</div>'},useData:!0})},function(t,e,n){var i,a;i=[n(6),n(7),n(3),n(46),n(56),n(57),n(8),n(58),n(59)],a=function(t,e,n,i,a,r,o,s,l){"use strict";var d=null,u={DATA_EL:'[data-role="data"]',SAVE_BUTTON:"[data-role='save']",KEEP_NEW_DATA_BUTTON:"[data-role='keep-new']",KEEP_OLD_DATA_BUTTON:"[data-role='keep-old']",ABORT_MERGE_BUTTON:"[data-role='abort-merge']",CSV_MATCHER_OK:"[data-role='csv-matcher-ok']",CSV_MATCHER_CANCEL:"[data-role='csv-matcher-cancel']",utility:"#fx-data-management-utility-holder",btnFileUploader:"#btnFileUploader",btnDelAllData:"#btnDelAllData",dataFileUpload:"#dataFUpload",csvSeparator:"#csvSeparator"},c={lblUpload:"#lblUpload",lblSeparator:"#lblSeparator",csvSeparatorComma:"#csvSeparatorComma",csvSeparatorSemi:"#csvSeparatorSemi"},h=e.View.extend({render:function(e){t.extend(!0,this,{initial:e}),this._parseInput();var i=this._validateInput();return i===!0?(n.info("{Data} Rendering View"),this._attach(),this._initVariables(),this._initFileUploader(),this._initViews(),this._bindEventListeners()):(n.error("Impossible to render Data"),n.error(i)),n.info("{Data} Rendering View",this),this},_parseInput:function(){this.environment=this.initial.environment,this.lang=this.initial.lang.toLowerCase(),this.cLists=this.initial.codelists,this.dsd=this.initial.dsd,this.data=this.initial.data,this.generator=this.initial.generator},_validateInput:function(){var t=!0,e=[];return e.length>0?e:t},_attach:function(){this.$el.html(s(o))},_initVariables:function(){this.$savebtn=this.$el.find(u.SAVE_BUTTON),this.$dataEditorEl=this.$el.find(u.DATA_EL),this.$utility=this.$el.find(u.utility)},_initViews:function(){n.info("{Data} initViews");var t=this;this.$utility.hide(),a.init(this.$dataEditorEl,{lang:this.lang},null),a.on("data:restoreupload",function(){t.$utility.show(),t.$savebtn.prop("disabled",!1)}),a.on("error:showerrormsg",function(t){e.trigger("error:showerrormsg",t)}),a.on("data:loaded",function(){t.$utility.show(),t.$savebtn.prop("disabled",!1),e.trigger("data:loaded")}),n.info("{Data} Calling the Codelists"),this.generator.then(function(e){t.cLists=e,n.info("{Data} Calling the DSD");var i=t.dsd.columns;n.info("{Data} Setting the DSD..."),n.warn(JSON.stringify(i)),n.warn(JSON.stringify(t.cLists)),a.setColumns(i,t.cLists,null),n.info("{Data} DSD Columns Setted."),void 0!==t.data&&(a.setData(t.data,d),n.info("{Data} But not the data!")),a.setStatus("loaded"),t.$utility.show(),t.$savebtn.prop("disabled",!1)})},_initFileUploader:function(){this.$utility.html(l),this.$csvSeparator=this.$el.find(u.csvSeparator),this.$csvSeparator.on("click",function(t){t.stopPropagation()}),n.info("init file uploader"),this.fUpload=new r({accept:["csv"]}),this.fUpload.render(u.dataFileUpload),this.$utility.find(c.lblUpload).html(o[this.lang].DatalblUpload),this.$utility.find(c.lblSeparator).html(o[this.lang].DatalblSeparator),this.$utility.find(c.csvSeparatorComma).html(o[this.lang].DatalblcsvSeparatorComma),this.$utility.find(c.csvSeparatorSemi).html(o[this.lang].DatalblcsvSeparatorSemi)},_bindEventListeners:function(){n.info("{Data} _bindEventListeners");var t=this;this.$savebtn.on("click",function(){var t=a.getData();n.info("{DATA} saving",t),t?e.trigger("data:saving",t):e.trigger("error:showerror","invalidData")}),this.listenTo(e,"data:uploaded",function(e){n.info("{DATA}[EVT] data:uploaded "),t._csvLoaded(e)})},_removeEventListeners:function(){this.$savebtn.off()},_csvLoaded:function(t){n.info(" csv loaded "),this.fUpload.reset(),this.$utility.hide(),this.$savebtn.prop("disabled",!0),a.csvLoaded(t,{},this.$csvSeparator.val())},accessControl:function(e){return new i.Promise(function(n,i){t.isEmptyObject(e)?i():n()})},remove:function(){n.warn("{DATA} - Remove View"),this._removeEventListeners(),this.$savebtn.prop("disabled",!1),this.$utility.html(""),this.$utility.show(),e.View.prototype.remove.apply(this,arguments)}});return h}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports=h},function(t,e,n){var i,a;i=[n(6),n(3),n(7)],a=function(t,e,n){function i(n){e.info("{FUH} started."),this.config={},t.extend(!0,this.config,o,n);for(var i=0;i<this.config.accept.length;i++)this.config.accept[i]=this.config.accept[i].toLowerCase();this.$uploadInput}var a="data",r="uploaded",o={accept:[],maxFileBytes:0};return i.prototype.render=function(t){e.info("{FUH} render "),this.initUploadInput(t)},i.prototype.reset=function(){e.info("{FUH} reset "),this.$uploadInput.val("")},i.prototype.initUploadInput=function(i){e.info("{FUH} initUploadInput "),this.$uploadInput=t(i);var o=this;this.$uploadInput.on("change",function(i){if(e.info("{FUH} changed "),o.config.accept&&o.config.accept.length>0){var s=o.$uploadInput.val().split(".").pop().toLowerCase();if(t.inArray(s,o.config.accept)==-1)return alert("wrong file type"),o.reset(),!1}if(0!=o.config.maxFileBytes&&i.target.files.item(0).size>o.config.maxFileBytes)return alert("too big"),o.reset(),!1;if(void 0!=i.target.files){var l=new FileReader;l.onload=function(t){var i=t.target.result;e.info("{FUH} event triggering "),e.info(a+":"+r),n.trigger(a+":"+r,i)},l.readAsText(i.target.files.item(0))}return!1})},i.prototype.enabled=function(t){e.info("{FUH} enabled "),t?this.$uploadInput.removeAttr("disabled"):this.$uploadInput.attr("disabled","disabled")},i.prototype.destroy=function(){e.info("{FUH} destroy "),this.$uploadInput.off("change")},i}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(t,e,n){var i=n(12);t.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,a){return'<div class="row">\r\n    <div class="col-xs-12">\r\n        <button data-role="save" type="button" class="pull-right btn btn-floating fx-background-color-primary-color" aria-label="Left Align">\r\n            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>\r\n        </button>\r\n    </div>\r\n    <div id="fx-data-management-utility-holder" ></div>\r\n</div>\r\n\r\n<hr>\r\n<div class="row">\r\n    <div class="col-xs-12">\r\n       <div data-role="data"></div>\r\n    </div>\r\n</div>'},useData:!0})},function(t,e,n){var i=n(12);t.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,a){return'<div data-role="menu" class="dropdown">\r\n    <button id="btnFileUploader" class="btn btn-floating fx-background-color-primary-color" type="button" data-toggle="dropdown" aria-expanded="true">\r\n        <span class="icojam_cloud_upload"></span>\r\n    </button>\r\n    <ul class="dropdown-menu json-menu">\r\n        <li class="js-menu dropdown-submenu">\r\n            <label id="lblSeparator" for="csvSeparator">CSV Separator</label>\r\n            <br>\r\n            <select id="csvSeparator" name="csvSeparator" >\r\n                <option id="csvSeparatorComma" value="," selected="selected">Comma</option>\r\n                <option id="csvSeparatorSemi" value=";">Semicolon</option>\r\n            </select>\r\n        </li>\r\n        <li class="js-menu dropdown-submenu">\r\n            <label id="lblUpload" for="dataFUpload">Upload</label>\r\n            <br>\r\n            <input type="file" name="filename" id="dataFUpload" accept=".csv" />\r\n            <br>\r\n        </li>\r\n    </ul>\r\n</div>'},useData:!0})},function(t,e,n){var i,a;i=[n(6),n(7),n(3),n(46),n(8),n(61),n(32)],a=function(t,e,n,i,a,r,o){"use strict";var s={btnMeta:"#btnMeta",btnDSD:"#btnDSD",btnData:"#btnData"},l={DManResHeader:"#DManResHeader"},d=e.View.extend({render:function(e){t.extend(!0,this,{initial:e}),this._parseInput();var i=this._validateInput();return i===!0?(n.info("Rendering View - Home",this),this._attach(),this._bindEventListeners(),this):(n.error("Impossible to render Home"),void n.error(i))},_validateInput:function(){var t=!0,e=[];return e.length>0?e:t},_parseInput:function(){this.cache=this.initial.cache,this.environment=this.initial.environment,this.disabledSections=this.initial.disabledSections,this.lang=this.initial.lang.toLowerCase(),n.info("Disabled Sections",this.disabledSections)},_attach:function(){var e=this;this.$el.html(r(a)),this.$el.find(s.btnMeta).html(a[this.lang].btnMetadata),this.$el.find(s.btnDSD).html(a[this.lang].btnDSD),this.$el.find(s.btnData).html(a[this.lang].btnData),this.$el.find(l.DManResHeader).html(a[this.lang].DManResHeader),t.each(this.disabledSections,function(t,n){e.$el.find(s[n]).parent().hide()})},_bindEventListeners:function(){this.$el.find(s.btnMeta).is(":visible")&&this.$el.find(s.btnMeta).on("click",function(){e.trigger(o.SHOW_METADATA)}),this.$el.find(s.btnDSD).is(":visible")&&this.$el.find(s.btnDSD).on("click",function(){e.trigger(o.SHOW_DSD)}),this.$el.find(s.btnData).is(":visible")&&this.$el.find(s.btnData).on("click",function(){e.trigger(o.SHOW_DATA)})},_unbindEventListeners:function(){this.$el.find(s.btnMeta).off(),this.$el.find(s.btnDSD).off(),this.$el.find(s.btnData).off()},accessControl:function(e){return new i.Promise(function(n,i){t.isEmptyObject(e)?i():n()})},remove:function(){this._unbindEventListeners(),e.View.prototype.remove.apply(this,arguments)}});return d}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(t,e,n){var i=n(12);t.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,a){return'<div class="row">\r\n    <div class="col-md-4 col-md-offset-4">\r\n        <div class="datamng-welcome">\r\n            <h3 id="DManResHeader">Edit Resource</h3>\r\n\r\n            <div class="btn-group btn-group-justified" role="group">\r\n                <div class="btn-group" role="group">\r\n                    <button id="btnMeta" data-section="metadata" class="btn btn-default fx-button-primary-color" > Metadata </button>\r\n                </div>\r\n                <div class="btn-group" role="group">\r\n                    <button id="btnDSD" data-section="dsd" class="btn btn-default fx-button-primary-color" > DSD Editor </button>\r\n                </div>\r\n                <div class="btn-group" role="group">\r\n                    <button id="btnData" data-section="data" class="btn btn-default fx-button-primary-color" > Data </button>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n'},useData:!0})},function(t,e,n){var i,a;i=[n(6),n(33),n(3),n(46),n(42),n(7),n(32),n(37)],a=function(t,e,n,i,a,r,o,s){"use strict";function l(){n.info("FENIX DM - Resource Manager"),this.resource={},n.info("FENIX DM - Resource Manager completed.")}return l.prototype.init=function(t){n.info("Resource manager config:"),n.info(t),this.bridge=new a({environment:t.environment,cache:t.cache})},l.prototype.getEnvironment=function(){return n.info("FENIX DM - Current Environment: "+this.environment),n.info("FENIX DM - Current Bridge Environment: "+this.bridge.environment),this.environment},l.prototype.isResourceValid=function(t){return this.isValidMetadata(t.metadata)&&this.isDSDValid(t.metadata.dsd)&&this.isDataValid(t.data)},l.prototype.isDSDValid=function(t){if(!t)throw r.trigger("error:showerrormsg","DSD to update cannot be null"),new Error("DSD to update cannot be null");if(!t.datasources)throw r.trigger("error:showerrormsg","Datasources cannot be null"),new Error("Datasources cannot be null");if(0==t.datasources.length)throw r.trigger("error:showerrormsg","Datasources cannot be null"),new Error("Datasources cannot be null");if(!t.contextSystem)throw r.trigger("error:showerrormsg","ContextSystem cannot be null"),new Error("ContextSystem cannot be null");return!0},l.prototype.isDataValid=function(t){return!0},l.prototype.isValidMetadata=function(t){return!0},l.prototype.isDSDEmpty=function(){return void 0===this.resource.metadata.dsd.columns},l.prototype.isDSDEditable=function(){return void 0===this.resource.data},l.prototype.createResource=function(t){return t.contextSystem?t.resourceRepresentationType?Array.isArray(t.datasources)&&0===t.datasources.length?(n.error("Data Sources can not be null"),void alert("Data Sources can not be null")):void this.bridge.saveMetadata({body:{dsd:{contextSystem:t.contextSystem,datasources:t.datasources},meContent:{resourceRepresentationType:t.resourceRepresentationType}}}).then(e.bind(function(t){n.info("Resource crated"),this.resource={metadata:t},r.trigger(o.RESOURCE_CREATED)},this),function(t,e){n.error("Error metadata update"),n.error(t),n.error(e),r.trigger("error:showerrorsrv",null,t)}):(n.error("Impossible to find resourceRepresentationType"),void alert("Impossible to find resourceRepresentationType")):(n.error("Impossible to find context system"),void alert("Impossible to find context system"))},l.prototype.deleteResource=function(){this.bridge.deleteResource({uid:this.resource.metadata.uid,version:this.resource.metadata.version}).then(e.bind(function(){this.resource={},r.trigger(o.RESOURCE_DELETED)},this),e.bind(function(){r.trigger("error:showerrorsrv",null)},this))},l.prototype.unloadResource=function(){
n.info("RM - unloadResource"),r.trigger(o.RESOURCE_UNLOADED)},l.prototype.getCodelist=function(t){n.info("getCodelist called ",t);var e={uid:t};return t.indexOf("|")!=-1&&(e.version=t.substr(t.indexOf("|")+1,t.length),e.uid=t.substr(0,t.indexOf("|"))),n.info(">bridge.getResource",e),this.bridge.getResource(e).then(function(t){return n.info("<bridge.getResource",t),t})},l.prototype.loadResource=function(t){n.info("Load resource"),n.info(t),this.bridge.getResource({uid:t.model.uid,version:t.model.version,params:{dsd:!0,full:!0,export:!0}}).then(e.bind(this._onLoadResourceSuccess,this,t),e.bind(this._onLoadResourceError,this))},l.prototype._onLoadResourceSuccess=function(t,e){n.info("Load resource success",e),e||(n.error("Resource is empty"),r.trigger("error:showerrormsg","Resource is empty")),this.assign(e,"metadata.uid",this.getNestedProperty("uid",t.model)),this.assign(e,"metadata.version",this.getNestedProperty("version",t.model)),this.assign(e,"metadata.dsd.rid",this.getNestedProperty("dsd.rid",t.model)),this.assign(e,"metadata.meMaintenance.seUpdate.updateDate",this.getNestedProperty("meMaintenance.seUpdate.updateDate",t.model)),this.assign(e,"metadata.creationDate",this.getNestedProperty("creationDate",t.model)),this.setResource(e),r.trigger(o.RESOURCE_LOADED)},l.prototype._onLoadResourceError=function(t){n.error("Load resource error",t),n.error(t),r.trigger("error:showerrormsg","Connection error")},l.prototype.getMetadata=function(){return n.info("Get Metadata",this.resource.metadata),this.isValidMetadata(this.resource.metadata)?this.resource.metadata:{}},l.prototype._onGetMetadataSuccess=function(t){n.info("_onGetMetadataSuccess"),n.info(t)},l.prototype._onGetMetadataError=function(t){return n.error("_onGetMetadataError"),n.error(t),r.trigger("error:showerrormsg","Connection error"),!1},l.prototype.saveMetadata=function(){n.info("saveMetadata Called."),this.bridge.updateMetadata({body:t.extend(!0,{},this.resource.metadata),dsdRid:this.getNestedProperty("metadata.dsd.rid",this.resource)}).then(e.bind(function(t){n.info("Success metadata update"),n.info(t),r.trigger(o.RESOURCE_UPDATED)},this),e.bind(function(t,e){n.error("Error metadata update"),n.error(t),n.error(e),r.trigger("error:showerrorsrv",null,t)},this))},l.prototype.setResource=function(t){this.resource=t},l.prototype.updateMetadata=function(t){var n=["meIdentification","meDocuments","meInstitutionalMandate","meAccessibility","meContent","meDataQuality","meMaintenance","meReferenceSystem","meResourceStructure","meSpatialRepresentation","meStatisticalProcessing"],i=["language","languageDetails","title","creationDate","characterSet","metadataStandardName","metadataStandardVersion","metadataLanguage","contacts","noDataValue","additions"],a=this.getNestedProperty("metadata.meContent.resourceRepresentationType",this.resource)||s.config.resourceRepresentationType;e.each(i,e.bind(function(e){this.assign(this.resource,"metadata."+e,t[e])},this)),e.each(n,e.bind(function(e){t[e]&&this.assign(this.resource,"metadata."+e,t[e])},this)),this.assign(this.resource,"metadata.meContent.resourceRepresentationType",a)},l.prototype.getDSD=function(){return this.resource&&this.resource.metadata?t.extend(!0,{},this.resource.metadata.dsd):void 0},l.prototype.updateDsd=function(t){var e=this.getNestedProperty("metadata.dsd.rid",this.resource);t.rid=e,t.rid||(n.warn("DSD rid not found"),n.warn(this.resource)),this.assign(this.resource,"metadata.dsd",t)},l.prototype.saveDsd=function(){this.bridge.updateDSD({body:this.resource.metadata.dsd}).then(e.bind(function(t){n.info("Success dsd update"),n.info(t),r.trigger(o.RESOURCE_UPDATED)},this),e.bind(function(t,e){n.error("Error dsd update"),n.error(t),n.error(e),r.trigger("error:showerrorsrv",null,t)},this))},l.prototype.getData=function(){return n.info("getData called.",this.resource.data),this.resource.data},l.prototype.setDataEmpty=function(){n.info("setDataEmpty called."),this.resource.data={}},l.prototype.setData=function(t){n.info("setData called.",t),this.isDataValid(t)&&(this.resource.data=t,this.updateData(this.resource.data))},l.prototype.updateData=function(t){n.info("updateData Called.",t),this.bridge.updateData({body:{metadata:{uid:this.resource.metadata.uid},data:t}}).then(e.bind(function(t){n.info("Success data update"),n.info(t),r.trigger(o.RESOURCE_UPDATED)},this),e.bind(function(t,e){n.error("Error data update"),n.error(t),n.error(e),r.trigger("error:showerrorsrv",null,t)},this))},l.prototype.getCurrentResourceCodelists=function(){if(n.info("getCurrentResourceCodelists called."),void 0===this.resource.metadata)return null;if(void 0===this.resource.metadata.dsd)return null;if(void 0===this.resource.metadata.dsd.columns)return null;var i=[],a=this.resource.metadata.dsd.columns;return t.each(a,function(t,e){var n="";"code"==e.dataType&&(n=e.domain.codes[0].idCodeList,e.domain.codes[0].version&&(n=n+"|"+e.domain.codes[0].version),i.push(n))}),e.unique(i)},l.prototype.generateDSDStructure=function(){n.info("generateDSDStructure called.");var e=this,a=e.getCurrentResourceCodelists(),r=[];return t.each(a,function(t,n){r.push(e.getCodelist(n))}),i.all(r).then(function(e){var n={};return t.each(e,function(t,e){e.metadata.version?n[e.metadata.uid+"|"+e.metadata.version]=e:n[e.metadata.uid]=e}),n})},l.prototype.assign=function(t,e,n){if("string"==typeof e&&(e=e.split(".")),e.length>1){var i=e.shift();this.assign(t[i]="[object Object]"===Object.prototype.toString.call(t[i])?t[i]:{},e,n)}else t[e[0]]=n},l.prototype.getNestedProperty=function(e,n){for(var n=t.extend(!0,{},n),i=e.split(".");i.length&&(n=n[i.shift()]););return n},new l}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(t,e,n){var i=n(12);t.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,a){return'<div id="fx-data-management" class="data-mng-container">\r\n\r\n    <div id="fx-data-management-menu" class="fx-data-management-menu"></div>\r\n\r\n    <div class="row">\r\n        <div class="col-md-12">\r\n            <h3>\r\n                <span id="fx-data-managment-header-title"></span>\r\n                <span id="fx-data-managment-resource-title"></span>\r\n            </h3>\r\n\r\n        </div>\r\n    </div>\r\n\r\n    <div id="fx-data-management-content-holder"></div>\r\n\r\n</div>'},useData:!0})},function(t,e,n){var i;i=function(){"use strict";return{MLEditor:{langs:["EN","FR"]},DSD_EDITOR_CODELISTS:[{value:"HS|2012",text:{EN:"HS",FR:"HS FR"},subject:"item"},{value:"CPC|2.1",text:{EN:"CPC",FR:"CPC FR"},subject:"item"},{value:"CountrySTAT_Indicators",text:{EN:"CountrySTAT_Indicators",FR:"CountrySTAT_Indicators FR"},subject:"indicator"},{value:"CountrySTAT_UM",text:{EN:"CountrySTAT_UM",FR:"CountrySTAT_UM FR"},subject:"um"},{value:"UNECA_ISO3",text:{EN:"UNECA_ISO3",FR:"UNECA_ISO3 FR"},subject:"geo"},{value:"UNECA_ClassificationOfActivities|2.0",text:{EN:"UNECA_ClassificationOfActivities 2.0",FR:"UNECA_ClassificationOfActivities 2.0 FR"},subject:"item"},{value:"Flag",text:{EN:"Flag",FR:"Flag FR"},subject:"flag"},{value:"UNECA_Gender",text:{EN:"UNECA_Gender",FR:"UNECA_Gender FR"},subject:"gender"},{value:"UNECA_Energy",text:{EN:"UNECA_Energy",FR:"UNECA_Energy"},subject:"item"},{value:"UNECA_UnitMeasure",text:{EN:"UNECA_UnitMeasure UM",FR:"UNECA_UnitMeasure UM FR"},subject:"um"}]}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i;i=function(){"use strict";return{fabri:!1}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e,n){var i;i=function(){"use strict";return{}}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e){}])});
//# sourceMappingURL=fenix-ui-data-management.min.js.map